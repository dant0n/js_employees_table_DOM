{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","dataRows","currentColumnIndex","sortAsc","addForm","saveFormButton","sortColumn","columnIndex","rows","children","sort","a","b","firstValue","innerText","secondValue","parseSalary","localeCompare","forEach","row","append","salaryString","replaceAll","convertSalaryToString","salaryNumber","toLocaleString","form","createElement","nameInput","positionInput","officeInput","ageInput","salaryInput","saveButton","setAttribute","type","officeOptions","inputs","option","add","Option","input","formElement","dataset","qa","charAt","toUpperCase","substring","required","appendChild","classList","after","validateFields","ageField","nameField","value","length","showNotification","title","message","notification","titleElement","description","setTimeout","remove","addEventListener","evt","target","tagName","targetElement","inputElement","initialValue","e","key","blur","focus","closest","cellIndex","preventDefault","formInputs","querySelectorAll","newRow","element","newCell","reset"],"mappings":"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","file":"main.d13a24d4.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst table = document.querySelector('table');\nconst dataRows = document.querySelector('tbody');\nlet currentColumnIndex = null;\nlet sortAsc = true;\n\naddForm();\n\nconst saveFormButton = document.querySelector('button');\n\ntable.addEventListener('dblclick', evt => {\n  if (evt.target.tagName === 'TD') {\n    const targetElement = evt.target;\n    const inputElement = document.createElement('input');\n    const initialValue = targetElement.innerText;\n\n    targetElement.innerText = '';\n    inputElement.classList.add('cell-input');\n    inputElement.value = initialValue;\n\n    inputElement.addEventListener('blur', () => {\n      if (!inputElement.value.length) {\n        targetElement.innerText = initialValue;\n      } else {\n        targetElement.innerText = inputElement.value;\n      }\n    });\n\n    inputElement.addEventListener('keydown', e => {\n      if (e.key === 'Enter') {\n        inputElement.blur();\n      }\n    });\n\n    targetElement.append(inputElement);\n    inputElement.focus();\n  }\n});\n\ntable.addEventListener('click', e => {\n  if (e.target.closest('thead')) {\n    sortColumn(e.target.cellIndex);\n\n    return;\n  }\n\n  if (e.target.closest('tbody')) {\n    for (const row of document.querySelector('tbody').children) {\n      row.classList.remove('active');\n    }\n    e.target.closest('tr').classList.add('active');\n  }\n});\n\nsaveFormButton.addEventListener('click', e => {\n  e.preventDefault();\n\n  const form = document.querySelector('form');\n  const formInputs = [...form.querySelectorAll('input, select')];\n\n  if (!validateFields(form)) {\n    return;\n  }\n\n  const newRow = document.createElement('tr');\n\n  formInputs.forEach(element => {\n    const newCell = document.createElement('td');\n\n    newCell.innerText = element.dataset.qa === 'salary'\n      ? convertSalaryToString(+element.value) : element.value;\n    newRow.append(newCell);\n  });\n\n  dataRows.append(newRow);\n  showNotification('Success!', 'Successfully added new employee', 'success');\n\n  form.reset();\n});\n\nfunction sortColumn(columnIndex) {\n  const rows = [...dataRows.children];\n\n  if (columnIndex !== currentColumnIndex) {\n    sortAsc = true;\n  }\n\n  rows.sort((a, b) => {\n    const firstValue = a.children[columnIndex].innerText;\n    const secondValue = b.children[columnIndex].innerText;\n\n    if (columnIndex === 3) {\n      return sortAsc ? +firstValue - +secondValue : +secondValue - +firstValue;\n    }\n\n    if (columnIndex === 4) {\n      return sortAsc ? parseSalary(firstValue) - parseSalary(secondValue)\n        : parseSalary(secondValue) - parseSalary(firstValue);\n    }\n\n    return sortAsc ? firstValue.localeCompare(secondValue)\n      : secondValue.localeCompare(firstValue);\n  }).forEach(row => {\n    dataRows.append(row);\n  });\n\n  sortAsc = !sortAsc;\n  currentColumnIndex = columnIndex;\n}\n\nfunction parseSalary(salaryString) {\n  return +salaryString.replaceAll('$', '').replaceAll(',', '');\n}\n\nfunction convertSalaryToString(salaryNumber) {\n  return `$${salaryNumber.toLocaleString()}`;\n}\n\nfunction addForm() {\n  const form = document.createElement('form');\n  const nameInput = document.createElement('input');\n  const positionInput = document.createElement('input');\n  const officeInput = document.createElement('select');\n  const ageInput = document.createElement('input');\n  const salaryInput = document.createElement('input');\n  const saveButton = document.createElement('button');\n\n  nameInput.setAttribute('data-qa', 'name');\n  positionInput.setAttribute('data-qa', 'position');\n  officeInput.setAttribute('data-qa', 'office');\n  ageInput.setAttribute('data-qa', 'age');\n  salaryInput.setAttribute('data-qa', 'salary');\n  saveButton.innerText = 'Save to table';\n  ageInput.type = 'number';\n  salaryInput.type = 'number';\n\n  const inputs = [nameInput, positionInput, officeInput, ageInput, salaryInput];\n  const officeOptions = [\n    'Tokyo', 'Singapore', 'London', 'New York', 'Edinburgh', 'San Francisco',\n  ];\n\n  for (const option of officeOptions) {\n    officeInput.add(new Option(option));\n  }\n\n  for (const input of inputs) {\n    const formElement = document.createElement('label');\n\n    formElement.innerText = input.dataset.qa.charAt(0).toUpperCase()\n      + input.dataset.qa.substring(1);\n    input.required = true;\n    formElement.appendChild(input);\n    form.appendChild(formElement);\n  }\n  form.appendChild(saveButton);\n  form.classList.add('new-employee-form');\n  table.after(form);\n}\n\nfunction validateFields(form) {\n  const ageField = form.querySelector('[data-qa=\"age\"]');\n  const nameField = form.querySelector('[data-qa=\"name\"]');\n\n  if (nameField.value.length < 4) {\n    showNotification(\n      'Error', 'Name should have more than 4 characters.', 'error');\n\n    return false;\n  }\n\n  if (+ageField.value < 18 || +ageField.value > 90) {\n    showNotification('Error', 'Age should be between 18 and 90', 'error');\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction showNotification(title, message, type) {\n  const notification = document.createElement('div');\n  const titleElement = document.createElement('h2');\n  const description = document.createElement('p');\n\n  notification.classList.add('notification', type);\n  titleElement.classList.add('title');\n  titleElement.innerText = title;\n  description.innerText = message;\n  notification.append(titleElement, description);\n  document.querySelector('body').appendChild(notification);\n\n  setTimeout(() => {\n    notification.remove();\n  }, 2000);\n}\n"]}